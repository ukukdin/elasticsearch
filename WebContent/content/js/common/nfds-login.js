var nfdsLogin = nfdsLogin || {};;(function($,window,undefined) {    "use strict";    $(document).ready(function() {        nfdsLogin.$container=$("#form_login");        nfdsLogin.$container.validate({		        	rules:{		                username:{		                    required:true,		                    acceptOnlyAlphanumeric:true		                },		                password:{		                    required:true,		                    acceptOnlyAlphanumericAndSomeSpecialChars:true		                }		            },		            messages: {		                username: {		                    required: "아이디를 입력하세요",		                    acceptOnlyAlphanumeric: "영문자와 숫자만 입력할 수 있습니다."		                },		                password: {		                    required: "비밀번호를 입력하세요",		                    acceptOnlyAlphanumericAndSomeSpecialChars: "영문자,숫자,특수문자(~!@#$%^&*)만 입력할 수 있습니다."		                }		            },                    highlight:function(element) {                        $(element).closest('.input-group').addClass('validate-has-error');                    },                    unhighlight:function(element) {                        $(element).closest('.input-group').removeClass('validate-has-error');                    },                    submitHandler:function(ev) {                        $(".login-page").addClass('logging-in');                        $(".form-login-error").slideUp('fast');                                                setTimeout(function() {                            var random_pct = 25 + Math.round(Math.random()*30);                             nfdsLogin.setPercentage(40 + random_pct);                                                        $.ajax({                                url : gCONTEXT_PATH + '/servlet/login/j_spring_security_check',                                method:'POST',                                dataType:'json',                                data:{                                    _csrf:$("input#_csrf").val(),                                    j_username:$("input#username").val(),                                    j_password:$("input#password").val()                                },                                                                error:function(jqXHR, textStatus, errorThrown) {                                    console.log("code : "+jqXHR.status+"\n"+" message : "+jqXHR.responseText+"\n"+"error:"+errorThrown);                                    alert("An error occoured!");                                },                                                                success:function(response) {                                    var login_status = response.login_status;                                    //console.log("login_status : "+ login_status);                                                                        nfdsLogin.setPercentage(100);                                    setTimeout(function() {                                        if(login_status=='invalid') {                                            $(".login-page").removeClass('logging-in');                                            nfdsLogin.resetProgressBar(true);                                                                                    } else if(login_status=='success') {                                            setTimeout(function() {                                                var redirect_url = baseurl;                                                if(response.redirect_url && response.redirect_url.length) {                                                    redirect_url = response.redirect_url;                                                }                                                //console.log("redirect_url : "+ redirect_url); // scseo check                                                window.location.href = redirect_url;                                                                                            }, 400);                                        }                                    }, 1000);                                }                            });                        }, 650);                    }                });                var is_lockscreen = $(".login-page").hasClass('is-lockscreen');        if(is_lockscreen) {            nfdsLogin.$container = $("#form_lockscreen");            nfdsLogin.$ls_thumb  = nfdsLogin.$container.find('.lockscreen-thumb');            nfdsLogin.$container.validate({                rules:{ password:{required:true}},                highlight:function(element) {                    $(element).closest('.input-group').addClass('validate-has-error');                },                unhighlight:function(element) {                    $(element).closest('.input-group').removeClass('validate-has-error');                },                submitHandler:function(ev) {                    $(".login-page").addClass('logging-in-lockscreen');                    setTimeout(function() {                        var random_pct = 25 + Math.round(Math.random() * 30);                        nfdsLogin.setPercentage(random_pct, function() {                            setTimeout(function() {                                nfdsLogin.setPercentage(100,function() {                                    setTimeout("window.location.href = '../../'",600);                                },2);                            }, 820);                        });                    }, 650);                }            });        }        nfdsLogin.$body = $(".login-page");        nfdsLogin.$login_progressbar_indicator = $(".login-progressbar-indicator h3");        nfdsLogin.$login_progressbar = nfdsLogin.$body.find(".login-progressbar div");         nfdsLogin.$login_progressbar_indicator.html('0%');                if(nfdsLogin.$body.hasClass('login-form-fall')) {            var focus_set = false;            setTimeout(function() {                nfdsLogin.$body.addClass('login-form-fall-init');                setTimeout(function() {                    if(!focus_set) {                        nfdsLogin.$container.find('input:first').focus();                        focus_set = true;                    }                }, 550);            }, 0);                    } else {            nfdsLogin.$container.find('input:first').focus();        }        nfdsLogin.$container.find('.form-control').each(function(i,el) {            var $this = $(el), $group = $this.closest('.input-group');                        $this.prev('.input-group-addon').click(function() {                $this.focus();            });                        $this.on({                focus:function() {                    $group.addClass('focused');                },                blur:function() {                    $group.removeClass('focused');                }            });        });                        $.extend(nfdsLogin, {            setPercentage:function(pct,callback) {                pct = parseInt(pct/100*100,10) + '%';                if(is_lockscreen) {                    nfdsLogin.$lockscreen_progress_indicator.html(pct);                    var o = {pct:currentProgress};                    TweenMax.to(o, .7, {                        pct:parseInt(pct,10),                         roundProps:["pct"],                         ease:Sine.easeOut,                         onUpdate:function() {                            nfdsLogin.$lockscreen_progress_indicator.html(o.pct + '%');                            drawProgress(parseInt(o.pct,10)/100);                        },                        onComplete:callback                    });                    return;                }                                nfdsLogin.$login_progressbar_indicator.html(pct);                nfdsLogin.$login_progressbar.width(pct);                                var o = { pct:parseInt(nfdsLogin.$login_progressbar.width()/nfdsLogin.$login_progressbar.parent().width()*100,10) };                TweenMax.to(o, .7, {                    pct:parseInt(pct,10),                    roundProps:["pct"],                    ease:Sine.easeOut,                    onUpdate:function() {                        nfdsLogin.$login_progressbar_indicator.html(o.pct+'%');                    },                    onComplete:callback                });            },            resetProgressBar:function(display_errors) {                TweenMax.set(nfdsLogin.$container,{ css:{opacity:0} });                setTimeout(function() {                    TweenMax.to(nfdsLogin.$container, .6, {css:{opacity:1}, onComplete:function(){ nfdsLogin.$container.attr('style',''); }});                    nfdsLogin.$login_progressbar_indicator.html('0%');                    nfdsLogin.$login_progressbar.width(0);                                        if(display_errors) {                        var $errors_container = $(".form-login-error");                        $errors_container.show();                        var height = $errors_container.outerHeight();                        $errors_container.css({height:0});                        TweenMax.to($errors_container, .45, {                            css:{height:height},                             onComplete:function() {                                $errors_container.css({height:'auto'});                            }                        });                                                nfdsLogin.$container.find('input[type="password"]').val('');                    }                }, 800);            }        });                if(is_lockscreen) {            nfdsLogin.$lockscreen_progress_canvas = $('<canvas></canvas>');            nfdsLogin.$lockscreen_progress_indicator = nfdsLogin.$container.find('.lockscreen-progress-indicator');            nfdsLogin.$lockscreen_progress_canvas.appendTo(nfdsLogin.$ls_thumb);                        var thumb_size = nfdsLogin.$ls_thumb.width();            nfdsLogin.$lockscreen_progress_canvas.attr({width:thumb_size,height:thumb_size});            nfdsLogin.lockscreen_progress_canvas = nfdsLogin.$lockscreen_progress_canvas.get(0);                        var bg = nfdsLogin.lockscreen_progress_canvas, ctx = ctx = bg.getContext('2d'), imd=null, circ=Math.PI*2, quart=Math.PI/2, currentProgress=0;            ctx.beginPath();            ctx.strokeStyle = '#eb7067';            ctx.lineCap = 'square';            ctx.closePath();            ctx.fill();            ctx.lineWidth = 3.0;            imd=ctx.getImageData(0,0,thumb_size,thumb_size);                        var drawProgress = function(current) {                ctx.putImageData(imd,0,0);                ctx.beginPath();                ctx.arc(thumb_size/2, thumb_size/2, 70, -(quart), ((circ)*current)-quart, false);                ctx.stroke();                currentProgress = current*100;            };            drawProgress(0/100);                        nfdsLogin.$lockscreen_progress_indicator.html('0%');            ctx.restore();        }            });    })(jQuery,window);